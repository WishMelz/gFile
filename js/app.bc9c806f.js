(function(t){function e(e){for(var n,l,r=e[0],s=e[1],c=e[2],p=0,d=[];p<r.length;p++)l=r[p],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&d.push(i[l][0]),i[l]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,r=1;r<a.length;r++){var s=a[r];0!==i[s]&&(n=!1)}n&&(o.splice(e--,1),t=l(l.s=a[0]))}return t}var n={},i={app:0},o=[];function l(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=n,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)l.d(a,n,function(e){return t[e]}.bind(null,n));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=s;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"4b98":function(t,e,a){"use strict";a("c1c5")},"515d":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var n=a("2b0e"),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},o=[],l=(a("6b11"),a("2877")),r={},s=Object(l["a"])(r,i,o,!1,null,null,null),c=s.exports,u=a("8c4f"),p=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"upload"},[t._m(0),e("el-row",{staticStyle:{"text-align":"center"}},[e("el-col",[e("el-upload",{staticClass:"upload-demo",staticStyle:{width:"100%"},attrs:{drag:"",multiple:"",action:"/","before-upload":t.befUpload}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),e("em",[t._v("点击上传")])]),e("div",{staticClass:"el-upload__text"},[e("b",[t._v("支持 ctrl + v 上传")])])])],1)],1),e("el-divider"),e("div",{staticStyle:{"text-align":"center","padding-bottom":"20px","font-size":"14px"}},[t._v(" 支持任意文件！！！ ")]),e("el-row",{staticStyle:{padding:"0 30px",display:"grid","place-items":"center"}},[e("el-col",{staticClass:"tokentip",attrs:{span:10}}),e("el-col",{attrs:{span:10}},[e("el-input",{model:{value:t.token,callback:function(e){t.token=e},expression:"token"}},[e("template",{slot:"append"},[e("el-button",{on:{click:t.setToken}},[t._v("SET")])],1)],2)],1)],1),e("el-row",{staticStyle:{padding:"0 30px",display:"grid","place-items":"center","margin-top":"80px"}},[e("el-col",{staticStyle:{"text-align":"center"}},[t.folder.id?e("el-tag",{staticStyle:{margin:"10px 0"}},[t._v("FolderId:"+t._s(t.folder.id))]):t._e(),t._v(" "),e("br"),t.server?e("el-tag",{staticStyle:{margin:"10px 0"},attrs:{type:"success"}},[t._v("Server:"+t._s(t.server))]):t._e()],1),e("el-col",{staticClass:"resimg",attrs:{span:10}},[e("el-input",{model:{value:t.fileUrl,callback:function(e){t.fileUrl=e},expression:"fileUrl"}},[e("template",{slot:"prepend"},[t._v("fileUrl")]),e("template",{slot:"append"},[e("el-button",{staticClass:"copy",on:{click:function(e){return t.copy(t.fileUrl)}}},[t._v("COPY")])],1)],2)],1)],1),t._m(1)],1)},d=[function(){var t=this,e=t._self._c;return e("a",{attrs:{href:"https://github.com/WishMelz/gFile"}},[e("img",{staticStyle:{position:"fixed",top:"0px",right:"0px",border:"0px",width:"150px"},attrs:{src:"https://cdn.jsdelivr.net/gh/WishMelz/file@master/messy/614b81962449bb3430193bdd6eaa3c7f.png",alt:"Fork me on GitHub"}})])},function(){var t=this,e=t._self._c;return e("footer",[e("span",[e("a",{attrs:{href:"https://github.com/WishMelz/imgurl"}},[t._v("Github图片管理系统")])]),t._v(" | "),e("span",[e("a",{attrs:{href:"https://github.com/WishMelz/tFile"}},[t._v("TG视频/图片床")])])])}],f=a("1157"),h=a.n(f),g=a("5c96"),v=a.n(g);function m(t,e="请求异常"){return new Promise((a,n)=>{h.a.ajax({...t,success:t=>{a(t)},error:t=>{g["Message"].error(e),n(t)}})})}var b={data(){return{resUrl:{url:"",type:"",md:""},fullscreenLoading:!1,token:"",accountDetail:{},folder:{},server:"",file:null,fileUrl:"",uploadData:{},contData:{}}},mounted(){let t=this;document.addEventListener("paste",(function(e){if(e.clipboardData||e.originalEvent){var a=e.clipboardData||e.originalEvent.clipboardData;if(a.items){var n=a.items,i=n.length,o=null;!0;for(var l=0;l<i;l++)-1!==n[l].type.indexOf("image")&&(o=n[l].getAsFile());if(null!==o){if(t.fullscreenLoading)return;t.befUpload(o)}}}}))},methods:{async setToken(){this.fullscreenLoading=!0,await this.createToken(),await this.getAccountDetails(),this.fullscreenLoading=!1},async createToken(){let t={url:"https://api.gofile.io/createAccount"},e=await m(t,"获取Token失败!");"ok"==e.status&&(this.token=e.data.token)},async getAccountDetails(){let t={url:"https://api.gofile.io/getAccountDetails?token="+this.token},e=await m(t,"获取token详情失败!");"ok"==e.status&&(this.accountDetail=e.data)},async createFolder(){let t={url:"https://api.gofile.io/createFolder",type:"PUT",data:{token:this.token,parentFolderId:this.accountDetail.rootFolder}},e=await m(t,"创建文件夹失败!");"ok"==e.status&&(this.folder=e.data)},async setFolderOption(){let t={url:"https://api.gofile.io/setFolderOption",type:"PUT",data:{folderId:this.folder.id,token:this.token,option:"public",value:!0}};await m(t,"设置文件夹失败!")},async getServer(){let t={url:"https://api.gofile.io/getServer"},e=await m(t,"获取服务器失败!");"ok"==e.status&&(this.server=e.data.server)},async uploadFile(){if(""==this.server)return;let t=new FormData;t.append("file",this.file),t.append("folderId",this.folder.id),t.append("token",this.token);let e={url:`https://${this.server}.gofile.io/uploadFile`,type:"POST",processData:!1,contentType:!1,cache:!1,data:t},a=await m(e,"上传文件失败!");this.file=null,"ok"==a.status&&(this.uploadData=a.data)},async getContent(){let t={url:`https://api.gofile.io/getContent?token=${this.token}&contentId=${this.folder.id}&websiteToken=12345&cache=true`},e=await m(t,"获取上传详情失败！");"ok"==e.status&&(this.contData=e.data,this.fileUrl=e.data.contents[this.uploadData.fileId].link)},async befUpload(t){this.file=t,this.fullscreenLoading=!0,""!=this.token?(await this.createFolder(),await this.setFolderOption(),await this.getServer(),await this.uploadFile(),await this.getContent(),this.fullscreenLoading=!1):this.$message.error("请设置Token")},copy(t){if(""==t||!t)return;let e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("Copy"),this.$message({message:"复制成功",type:"success"}),e.remove()}}},y=b,k=(a("4b98"),Object(l["a"])(y,p,d,!1,null,"6c1e0f49",null)),w=k.exports;n["default"].use(u["a"]);const _=[{path:"/",name:"Home",component:w}],x=new u["a"]({base:"",routes:_});var S=x,O=a("2f62"),F=a("0e44");n["default"].use(O["a"]);var T=new O["a"].Store({state:{token:"",userInfo:{},uploadInfo:{iscant:!1,repos:"",content:"",delimit:"",branch:""}},mutations:{setToken(t,e){t.token=e},setUserInfo(t,e){t.userInfo=e},setUploadInfo(t,e){t.uploadInfo=e}},actions:{},modules:{},plugins:[Object(F["a"])()]});a("0fae");n["default"].use(v.a),n["default"].config.productionTip=!1,new n["default"]({router:S,store:T,render:t=>t(c)}).$mount("#app")},"6b11":function(t,e,a){"use strict";a("515d")},c1c5:function(t,e,a){}});
//# sourceMappingURL=app.bc9c806f.js.map